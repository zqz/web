{{define "partial_file_row"}}
<li id="file-{{.Slug}}">
    <span class="list-badge">{{if .Private}}<span class="badge badge--private">{{t "common.private"}}</span>{{else}}<span class="badge badge--public">{{t "common.public"}}</span>{{end}}</span>
    <span class="file-name">{{if .Complete}}<a href="/view/{{.Slug}}" class="file-name-text" title="{{.Name}}">{{.Name}}</a>{{else}}<span class="file-name-text">{{.Name}}</span>{{end}}{{if .Comment}} <button type="button" class="file-comment-icon" data-comment="{{.Comment}}" title="{{t "files.view_comment"}}" aria-label="{{t "files.has_comment_aria"}}"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></button>{{end}}</span>
    <span class="file-meta">· {{.SizeFmt}} · <span class="file-type" title="{{.ContentType}}">{{.ContentType}}</span></span>
    <span class="file-actions">
        {{if .Complete}}
            {{if .ViewURL}}<a href="{{.ViewURL}}" target="_blank" class="action-icon" title="{{t "common.preview"}}" aria-label="{{t "common.preview"}}"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M14 3h7v7"/><path d="M10 14 21 3"/><path d="M21 14v7h-7"/><path d="M3 10V3h7"/><path d="M3 21h7v-7"/><path d="M14 21H3"/></svg></a>{{end}}
            <a href="{{.DownloadURL}}" download class="action-icon" title="{{t "common.download"}}" aria-label="{{t "common.download"}}"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 3v12"/><path d="m7 10 5 5 5-5"/><path d="M5 21h14"/></svg></a>
            <button type="button" class="file-copy-link" title="{{t "common.copy_link"}}" aria-label="{{t "common.copy_link_aria"}}" data-view-url="{{.ViewURL}}" data-download-url="{{.DownloadURL}}"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg></button>
            {{if .CanEdit}}<a href="/files/{{.Slug}}" class="action-icon" title="{{t "common.edit"}}" aria-label="{{t "common.edit"}}"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 20h9"/><path d="M16.5 3.5a2.12 2.12 0 1 1 3 3L7 19l-4 1 1-4Z"/></svg></a>{{end}}
            {{if .ShowDelete}}<button type="button" class="action-icon danger" title="{{t "common.delete"}}" aria-label="{{t "common.delete"}}" onclick="if(confirm('{{t "files.delete_confirm" | quotejs}}')) { fetch('/api/v1/files/{{.Slug}}', { method: 'DELETE' }).then(r => { if(r.ok) { this.closest('li').remove(); } else { r.json().then(d => alert(d.error || '{{t "files.delete_failed" | quotejs}}')); } }); }"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M3 6h18"/><path d="M8 6V4h8v2"/><path d="M19 6l-1 14H6L5 6"/><path d="M10 11v6"/><path d="M14 11v6"/></svg></button>{{end}}
        {{else}}
            <em>{{t "files.uploading"}}</em>
        {{end}}
    </span>
</li>
{{end}}
